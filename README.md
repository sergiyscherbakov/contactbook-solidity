# ContactBook Smart Contract

## Опис проєкту

ContactBook - це смарт-контракт на мові Solidity для управління книгою контактів на блокчейні Ethereum. Контракт дозволяє власнику зберігати та отримувати інформацію про контакти (ім'я та адресу).

### Основний функціонал:
- Створення контракту з ім'ям власника
- Додавання нових контактів (тільки власник)
- Пошук контактів за адресою
- Пошук контактів за індексом
- Відстеження кількості доданих контактів

## Розробник

**Сергій Щербаков**
- GitHub: [@sergiyscherbakov](https://github.com/sergiyscherbakov)
- Email: sergiyscherbakov@ukr.net

## Технічні деталі

- **Версія Solidity**: ^0.8.23
- **Ліцензія**: MIT
- **Мережі для деплою**: Ethereum, Sepolia Testnet, Goerli Testnet

### Структура контракту:

```solidity
struct Contact {
    string name;
    address addr;
}
```

### Змінні стану:
- `owner` - адреса власника контракту
- `ownerName` - ім'я власника
- `contacts[]` - масив всіх контактів
- `contactIndex` - mapping для швидкого пошуку контактів

### Події:
- `NewContact(string name, address addr)` - випромінюється при додаванні нового контакту

## Інструкція з компіляції та деплою в Remix IDE

### Крок 1: Відкрити Remix IDE
1. Перейдіть на https://remix.ethereum.org/
2. Дочекайтесь повного завантаження інтерфейсу

### Крок 2: Створити новий файл
1. У лівій панелі натисніть на іконку "File Explorer" (папка)
2. Натисніть на іконку "Create New File" (документ з плюсом)
3. Введіть ім'я файлу: `contactbook.sol`
4. Скопіюйте весь код з файлу `contactbook.sol` з цього репозиторію

### Крок 3: Компіляція контракту
1. Натисніть на іконку "Solidity Compiler" (логотип Solidity) у лівій панелі
2. Переконайтесь, що версія компілятора встановлена на `0.8.23` або вище
3. Натисніть кнопку **"Compile contactbook.sol"**
4. Перевірте, що компіляція пройшла успішно (зелена галочка)
5. Якщо є помилки - виправте їх та повторіть компіляцію

### Крок 4: Деплой контракту
1. Натисніть на іконку "Deploy & Run Transactions" (Ethereum з стрілкою) у лівій панелі
2. У розділі **ENVIRONMENT** виберіть:
   - `Remix VM (Shanghai)` - для тестування локально
   - `Injected Provider - MetaMask` - для деплою в реальну мережу
3. У розділі **ACCOUNT** переконайтесь, що вибрано потрібний акаунт
4. У розділі **CONTRACT** переконайтесь, що вибрано `ContactBook`
5. У полі біля кнопки **Deploy** введіть параметр конструктора:
   - Введіть: `"Sergiy Shcherbakov"` (ім'я власника в лапках)
6. Натисніть кнопку **"Deploy"** (оранжева)
7. Підтвердіть транзакцію у MetaMask (якщо використовуєте реальну мережу)
8. Дочекайтесь підтвердження транзакції

### Крок 5: Перевірка успішного деплою
1. У розділі **Deployed Contracts** має з'явитись ваш контракт
2. Розгорніть контракт, натиснувши на стрілку
3. Ви побачите всі доступні функції та змінні

## Послідовність тестування контракту

### ВАЖЛИВО: Залежності між функціями
- Спочатку обов'язково потрібно викликати `addContact()` декілька разів для додавання контактів
- Лише після цього можна використовувати функції пошуку `findContactByAddress()` та `findContactByIndex()`

---

### Тест 1: Перевірка ініціалізації контракту

**Мета**: Переконатися, що контракт правильно ініціалізований

1. Натисніть кнопку **`owner`** (блакитна)
   - **Очікуваний результат**: Має відобразитись адреса вашого акаунту (той, з якого ви задеплоїли контракт)

2. Натисніть кнопку **`ownerName`** (блакитна)
   - **Очікуваний результат**: `Sergiy Shcherbakov`

---

### Тест 2: Додавання першого контакту

**Мета**: Додати перший контакт та перевірити event

**Параметри для введення:**
1. Розгорніть функцію **`addContact`** (оранжева кнопка)
2. У полі `_name` введіть: `Alice Smith`
3. У полі `_addr` введіть: `0x5B38Da6a701c568545dCfcB03FcB875f56beddC4`
   - (Це перший тестовий акаунт з Remix VM)
4. Натисніть кнопку **"transact"**

**Перевірка результату:**
- У консолі (внизу екрана) має з'явитись зелена галочка
- Розгорніть деталі транзакції
- У розділі **logs** знайдіть event `NewContact`
- Перевірте значення:
  - `name`: `Alice Smith`
  - `addr`: `0x5B38Da6a701c568545dCfcB03FcB875f56beddC4`

---

### Тест 3: Додавання другого контакту

**Параметри для введення:**
1. Розгорніть функцію **`addContact`**
2. У полі `_name` введіть: `Bob Johnson`
3. У полі `_addr` введіть: `0xAb8483Fb90B4c8183A35F8e4b2c5c0E9e8F9fE8E`
   - (Це другий тестовий акаунт з Remix VM)
4. Натисніть кнопку **"transact"**

**Перевірка результату:**
- Транзакція успішна (зелена галочка)
- У logs є event `NewContact` з правильними даними

---

### Тест 4: Додавання третього контакту

**Параметри для введення:**
1. Розгорніть функцію **`addContact`**
2. У полі `_name` введіть: `Charlie Brown`
3. У полі `_addr` введіть: `0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db`
   - (Це третій тестовий акаунт з Remix VM)
4. Натисніть кнопку **"transact"**

**Перевірка результату:**
- Транзакція успішна (зелена галочка)

---

### Тест 5: Перевірка доступу до масиву контактів

**Мета**: Отримати контакт безпосередньо з масиву

**Параметри для введення:**
1. Розгорніть функцію **`contacts`** (блакитна)
2. У поле введіть індекс: `0`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: string: name Alice Smith
1: address: addr 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4
```

4. Повторіть для індексу `1`:
```
0: string: name Bob Johnson
1: address: addr 0xAb8483Fb90B4c8183A35F8e4b2c5c0E9e8F9fE8E
```

5. Повторіть для індексу `2`:
```
0: string: name Charlie Brown
1: address: addr 0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db
```

---

### Тест 6: Пошук контакту за адресою (перший контакт)

**Мета**: Знайти ім'я контакту за його адресою

**Параметри для введення:**
1. Розгорніть функцію **`findContactByAddress`** (блакитна)
2. У поле `_addr` введіть: `0x5B38Da6a701c568545dCfcB03FcB875f56beddC4`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: string: Alice Smith
```

---

### Тест 7: Пошук контакту за адресою (другий контакт)

**Параметри для введення:**
1. Розгорніть функцію **`findContactByAddress`**
2. У поле `_addr` введіть: `0xAb8483Fb90B4c8183A35F8e4b2c5c0E9e8F9fE8E`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: string: Bob Johnson
```

---

### Тест 8: Пошук контакту за адресою (третій контакт)

**Параметри для введення:**
1. Розгорніть функцію **`findContactByAddress`**
2. У поле `_addr` введіть: `0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: string: Charlie Brown
```

---

### Тест 9: Пошук контакту за індексом

**Мета**: Отримати повну інформацію про контакт за індексом

**Параметри для введення:**
1. Розгорніть функцію **`findContactByIndex`** (блакитна)
2. У поле `_index` введіть: `0`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: string: Alice Smith
1: address: 0x5B38Da6a701c568545dCfcB03FcB875f56beddC4
```

4. Повторіть для індексу `1`:
```
0: string: Bob Johnson
1: address: 0xAb8483Fb90B4c8183A35F8e4b2c5c0E9e8F9fE8E
```

5. Повторіть для індексу `2`:
```
0: string: Charlie Brown
1: address: 0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db
```

---

### Тест 10: Перевірка mapping contactIndex

**Мета**: Перевірити, що mapping правильно зберігає індекси

**Параметри для введення:**
1. Розгорніть функцію **`contactIndex`** (блакитна)
2. У поле введіть адресу: `0x5B38Da6a701c568545dCfcB03FcB875f56beddC4`
3. Натисніть кнопку **"call"**

**Очікуваний результат:**
```
0: uint256: 0
```

4. Повторіть для адреси `0xAb8483Fb90B4c8183A35F8e4b2c5c0E9e8F9fE8E`:
```
0: uint256: 1
```

5. Повторіть для адреси `0x4B20993Bc481177ec7E8f571ceCaE8A9e22C02db`:
```
0: uint256: 2
```

---

### Тест 11: Перевірка модифікатора onlyOwner (негативний тест)

**Мета**: Переконатися, що тільки власник може додавати контакти

**Параметри для введення:**
1. У розділі **ACCOUNT** змініть акаунт на інший (НЕ той, з якого ви деплоїли)
2. Розгорніть функцію **`addContact`**
3. У полі `_name` введіть: `Unauthorized User`
4. У полі `_addr` введіть: `0x78731D3Ca6b7E34aC0F824c42a7cC18A495cabaB`
5. Натисніть кнопку **"transact"**

**Очікуваний результат:**
- Транзакція має провалитись (червоний хрестик)
- У деталях помилки має бути повідомлення: `Only the owner can add contacts`

**ВАЖЛИВО:** Після цього тесту поверніть акаунт власника назад!

---

### Тест 12: Спроба пошуку неіснуючого контакту (крайовий випадок)

**Мета**: Перевірити поведінку при пошуку контакту, який не існує

**Параметри для введення:**
1. Переконайтесь, що акаунт власника знову активний
2. Розгорніть функцію **`findContactByAddress`**
3. У поле `_addr` введіть адресу, яку НЕ додавали: `0x617F2E2fD72FD9D5503197092aC168c91465E7f2`
4. Натисніть кнопку **"call"**

**Очікуваний результат:**
- Може повернутись порожній рядок або помилка (залежить від версії Solidity)
- Це показує, що слід додати перевірку існування контакту в реальному застосунку

---

### Тест 13: Перевірка кількості контактів

**Мета**: Підрахувати, скільки контактів було додано

**Як перевірити:**
1. У Remix IDE, у розділі Deployed Contracts, подивіться на масив `contacts`
2. Спробуйте викликати `contacts` з індексом `3`
3. Має бути помилка "out of bounds", що підтверджує наявність тільки 3 контактів (індекси 0-2)

---

## Діаграма залежностей функцій

```
Деплой контракту (з параметром ownerName)
    ↓
1. Перевірити owner і ownerName
    ↓
2. Додати контакти через addContact() (виконати 3 рази)
    ↓
3. Тепер можна використовувати:
    ├── findContactByAddress()
    ├── findContactByIndex()
    ├── contacts[]
    └── contactIndex[]
```

## Можливі помилки та їх вирішення

### Помилка: "Only the owner can add contacts"
**Причина**: Ви намагаєтесь додати контакт з акаунту, який не є власником
**Рішення**: Переключіться на акаунт власника (той, з якого деплоїли контракт)

### Помилка: "Out of bounds"
**Причина**: Ви намагаєтесь отримати контакт з індексом, який не існує
**Рішення**: Використовуйте індекси від 0 до (кількість_контактів - 1)

### Помилка при компіляції: "Source file requires different compiler version"
**Причина**: Неправильна версія компілятора
**Рішення**: У Remix IDE встановіть компілятор версії 0.8.23 або вище

### Транзакція не підтверджується
**Причина**: Недостатньо gas або проблеми з мережею
**Рішення**:
- У Remix VM проблем не має бути
- У реальній мережі переконайтесь, що у вас є достатньо ETH для gas

## Покращення для production

Для використання в реальному проєкті рекомендується:

1. Додати функцію видалення контактів
2. Додати функцію редагування контактів
3. Додати перевірку на дублікати адрес
4. Додати функцію передачі права власності
5. Додати паузу контракту (Pausable pattern)
6. Додати обмеження на кількість контактів
7. Додати events для всіх важливих операцій
8. Написати unit тести (Hardhat/Foundry)
9. Провести аудит безпеки

## Ліцензія

MIT License - див. файл LICENSE

## Контакти

Якщо у вас виникли питання або пропозиції, зв'яжіться з розробником:
- Email: sergiyscherbakov@ukr.net
- GitHub: https://github.com/sergiyscherbakov/contactbook-solidity

---

**Дата створення**: 27 жовтня 2025
**Версія**: 1.0.0


## Автор

**Розробник:** Сергій Щербаков
**Email:** sergiyscherbakov@ukr.net
**Telegram:** @s_help_2010
